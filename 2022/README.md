# Universal Acceptance 2022 Test Run: Showcasing UA Readiness and Conducting Bug Reporting with Programming Languages

This page describes the work done by Cofomo in 2022 to showcase the UA readiness of some libraries & languages by providing 
compliant code samples with EAI & IDN protocols and by reporting bugs when needed.

The report \[[pdf](./ua-code-samples-20220627.pdf)\] contains recommendations for developers and code samples but also discussions on the compliance level.

There is also a PowerPoint presentation \[[pdf](ua-code-samples-presentation-20220809.pdf)\].

## Bug Reports

Here are the bug reports for each of the non-compliant tested libraries:

| Language   | Library           | Report                                                                                                                                                                                   | Resolution            | Notes                                                                                                                                                                                                                                                                                                                                                            |
|------------|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Java       | Commons Validator | [Bug report](https://issues.apache.org/jira/browse/VALIDATOR-483)                                                                                                                        | No answer yet         | The tested version includes a way to create instances of domain validator with a list of TLDs to consider valid which was not the case before. Former versions only allowed to override the list before the domain validator instance creation, which would therefore make the list become obsolete after a certain amount of time in long running applications. |
| Java       | Guava             | [Bug report about the documentation](https://github.com/google/guava/pull/5929)                                                                                                          | Waiting to be merged  | Guava maintainers recommend doing U-Label conversion with another library. We then submitted a pull-request improving their documentation to explicitly state that.                                                                                                                                                                                              |
| Java       | ICU               | [Bug report](https://unicode-org.atlassian.net/browse/ICU-21922)                                                                                                                         | accepted              | ICU performs some normalization on domain and therefore, some invalid characters as per IDNA 2008 but valid as per UTS46 are considered valid                                                                                                                                                                                                                    |
| Java       | Jakarta Mail      | [Bug report](https://github.com/eclipse-ee4j/mail/issues/589)                                                                                                                            | No answer yet         | valid domains rejected by Jakarta mail                                                                                                                                                                                                                                                                                                                           |
| Python     | IDNA              | No bug reported                                                                                                                                                                          |                       | The Python IDNA package is widely used and fully IDNA 2008 compliant. There is an ongoing discussion to make it a replacement to the Python idn module that implements IDNA 2003.                                                                                                                                                                                |
| Python     | Email Validator   | No bug reported                                                                                                                                                                          |                       | the email validation is not fully compliant with RFCs. For instance, it does not accept quoted local part which should be permitted. RFC 5321 recommends against using quoted string to ensure email deliverance, so the choice of the developers respects the RFC recommendations which makes it acceptable.                                                    |
| Python     | smtplib           | No bug reported                                                                                                                                                                          |                       | From the Python documentation, smtplib module supports SMTPUTF8 flag since Python 3.5                                                                                                                                                                                                                                                                            |
| Javascript | idna-uts46        | Bug report on the underlying NodeJS runtime for [illegal characters](https://github.com/nodejs/node/issues/41976) & [disallowed characters](https://github.com/nodejs/node/issues/41977) | Closed by maintainers |                                                                                                                                                                                                                                                                                                                                                                  |
| Javascript | validator         | No bug reported                                                                                                                                                                          | No answer yet         | Good compliance on [benchmark](https://viagenie.ca/ua/test-results-20200814.html#js-validator-title)                                                                                                                                                                                                                                                             |
| Javascript | nodemailer        | [Bug report](https://github.com/nodemailer/nodemailer/issues/1378)                                                                                                                       | No answer yet         | The library allows sending non-ASCII characters without checking if the remote server support the SMTPUTF8 extension                                                                                                                                                                                                                                             |